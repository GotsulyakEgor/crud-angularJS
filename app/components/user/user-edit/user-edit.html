<div class="user-create__page" ng-controller="UserEditController as vm">
    <div class="user-list">
        <notification ng-if="vm.showSuccessNotification" type="success"
                      message="User successfully edited"></notification>
        <notification ng-if="vm.showDeleteNotification" type="success"
                      message="User successfully deleted"></notification>
        <notification ng-if="vm.showErrorNotification" type="error"
                      message="Please fill out all required fields correctly."></notification>
        <a href="#/user-list/create" class="btn user-list__create-button">Create User</a>
        <table class="user-list__table">
            <thead class="user-list__thead">
            <tr class="user-list__row user-list__row--header">
                <th class="user-list__header">Username</th>
                <th class="user-list__header">First Name</th>
                <th class="user-list__header">Last Name</th>
                <th class="user-list__header">Email</th>
                <th class="user-list__header">Type</th>
            </tr>
            </thead>
            <tbody class="user-list__tbody">
            <tr class="user-list__row user-list__row--data" ng-repeat="user in vm.users"
                ng-click="vm.navigateToEditUser(user.username)">
                <td class="user-list__data">{{ user.username }}</td>
                <td class="user-list__data">{{ user.firstName }}</td>
                <td class="user-list__data">{{ user.lastName }}</td>
                <td class="user-list__data">{{ user.email }}</td>
                <td class="user-list__data">{{ user.type }}</td>
            </tr>
            </tbody>
        </table>
    </div>
    <div class="create-user-block">
        <form ng-submit="vm.editUser()" class="form--create-user">
            <div class="form__header">
                <div class="form__title">{{vm.user.firstName + '&nbsp' + vm.user.lastName}}</div>
                <div class="form__close">
                    <a href="#/user-list"><img src="/app/assets/icons/close-24px%20(1).svg" alt="close"></a>
                </div>
            </div>
            <div class="form__group">
                <label for="username" class="form__label">Username ⃰</label>
                <input type="text" id="username" ng-model="vm.editingUser.username" class="form__input" disabled>
                <div class="error-message" id="usernameLabel">Username must be unique.</div>
            </div>
            <div class="form__group">
                <label for="firstName" class="form__label">First name ⃰</label>
                <input type="text" id="firstName" ng-model="vm.editingUser.firstName" class="form__input">
                <div class="error-message" id="firstNameLabel">First name must be at least 1 character long.</div>
            </div>
            <div class="form__group">
                <label for="lastName" class="form__label">Last name ⃰</label>
                <input type="text" id="lastName" ng-model="vm.editingUser.lastName" class="form__input">
                <div class="error-message" id="lastNameLabel">Last name must be at least 1 character long.</div>
            </div>
            <div class="form__group">
                <label for="email" class="form__label">Email ⃰</label>
                <input id="email" ng-model="vm.editingUser.email" class="form__input">
                <div class="error-message" id="emailLabel">Must match the email format.</div>
            </div>
            <div class="form__group">
                <label for="userType" class="form__label">Type ⃰</label>
                <select id="userType" ng-model="vm.editingUser.type" class="form__select">
                    <option value="Admin">Admin</option>
                    <option value="Driver">Driver</option>
                </select>
                <div class="error-message" id="typeLabel">This is a required field.</div>
            </div>
            <div class="form__group">
                <label for="password" class="form__label">Password ⃰</label>
                <input type="password" id="password" ng-model="vm.editingUser.password" class="form__input">
                <div class="error-message" id="passwordLabel">Password format is incorrect.</div>
            </div>
            <div class="form__group">
                <label for="password" class="form__label">Repeat password ⃰</label>
                <input type="password" id="repeat-password" ng-model="vm.editingUser.repeatPassword"
                       class="form__input">
                <div class="error-message" id="repeatPasswordLabel">Password mismatch.</div>
            </div>
            <div class="form__button-block">
                <button type="submit" class="btn user-list__edit-button">Edit</button>
                <button ng-click="vm.deleteUser()" class="btn user-list__delete-button">Delete</button>
            </div>
        </form>
    </div>
</div>
